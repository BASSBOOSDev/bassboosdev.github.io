<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="icon.png" type="image/png">
<title>BASSBOOSDev</title>
<style>
/* ================= PROGRESS BAR ================= */
.progress-box{
    margin: 20px;
    background: #121722;
    border-radius: 10px;
    height: 20px;
    overflow: hidden;
}
.progress-bar{
    width: 100%;
    height: 100%;
    background: #1e2330;
    border-radius: 10px;
}
.progress{
    width: 0%;
    height: 100%;
    background: #00ff9c;
    transition: width 0.3s;
}

/* ================= GENERAL ================= */
body{
    margin:0;
    font-family:Consolas,monospace;
    background:linear-gradient(135deg,#1b1f2a,#12151c);
    color:#eaeaea;
    transition: background .3s, color .3s;
}
/* ========== HEADER ========== */
header{
    display:grid;
    grid-template-columns: auto 1fr auto;
    align-items:center;
    padding:14px 20px;
    background:#11141b;
    position:sticky;
    top:0;
    z-index:50;
}
.header-left{
    display:flex;
    align-items:center;
    gap:10px;
    cursor:pointer;
}
.header-left img{
    width:36px;
    height:36px;
    border-radius:8px;
    object-fit:cover;
    background:#1e2330;
}
.brand{
    font-weight:bold;
    letter-spacing:1px;
    color:#cfd6ff;
}
.project-name{
    text-align:center;
    font-size:18px;
    outline:none;
    color:#cfd6ff;
    word-break: break-word;
}
.header-buttons{
    display:flex;
    gap:10px;
}
.header-btn{
    background:#121722;
    border:1px solid #1e2330;
    color:#cfd6ff;
    padding:7px 14px;
    border-radius:10px;
    cursor:pointer;
    white-space: nowrap;
}
/* ========== SIDEBAR ========== */
.sidebar-toggle{
    position:fixed;
    left:10px;
    top:50%;
    transform:translateY(-50%);
    width:40px;
    height:40px;
    border-radius:8px;
    background:#121722;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    z-index:45;
    font-size:24px;
}
.sidebar{
    position:fixed;
    left:-280px;
    top:0;
    width:280px;
    height:100%;
    background:#0f1218;
    padding:20px;
    box-sizing:border-box;
    transition: left .3s;
    z-index:44;
    display:flex;
    flex-direction:column;
    gap:15px;
}
.sidebar h3{
    margin:0;
    font-size:16px;
    color:#cfd6ff;
}
.sidebar button{
    background:#121722;
    border:none;
    color:#cfd6ff;
    padding:10px;
    border-radius:8px;
    cursor:pointer;
}
/* ========== MODALES ================= */
.modal{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.75);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:100;
}
.modal-box{
    background:#0f1218;
    padding:20px;
    border-radius:14px;
    width:90%;
    max-width:400px;
}
.modal-box input, .modal-box select, .modal-box textarea{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:none;
    background:#121722;
    color:#cfd6ff;
    margin-bottom:10px;
}
/* ========== EDITOR ================= */
.editor{
    margin:20px;
    background:#0f1218;
    border-radius:14px;
    overflow-x:auto;
}
.linea{
    display:grid;
    grid-template-columns:40px 1fr 110px 40px 50px;
    align-items:center;
    padding:10px;
    border-bottom:1px solid #1e2330;
    gap:5px;
}
.texto{outline:none;color:#cfd6ff;}
.texto:empty::before{content:"Escrib√≠ ac√°...";color:#5f6a85;}
.prio{
    background:#121722;
    border:none;
    color:#cfd6ff;
    border-radius:6px;
}
.alta{border-left:4px solid #ff4d4d;}
.media{border-left:4px solid #ffd84d;}
.baja{border-left:4px solid #4dff88;}
.check{cursor:pointer;text-align:center;font-size:18px;}
.check.completo{color:#00ff9c;}
.add{
    text-align:center;
    padding:14px;
    cursor:pointer;
    background:#121722;
    font-size:24px;
}
/* ========== BOTON ELIMINAR ================= */
.delete-btn{
    background:#ff4d4d;
    border:none;
    color:#fff;
    border-radius:6px;
    cursor:pointer;
    padding:4px 8px;
    font-size:14px;
}
.delete-btn:hover{
    background:#ff1a1a;
}
/* ========== POMODORO ================= */
.pomodoro{
    margin:20px;
    background:#0f1218;
    padding:14px;
    border-radius:14px;
    display:flex;
    justify-content:space-between;
    flex-wrap:wrap;
    gap:10px;
}
.pomo-btn{
    background:#121722;
    border:none;
    color:#cfd6ff;
    padding:6px 14px;
    border-radius:8px;
    cursor:pointer;
}
/* ========== FELICIDADES ================= */
#finish{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.85);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:20;
    text-align:center;
    padding:20px;
    box-sizing:border-box;
}
#finish button{
    margin-top:20px;
    padding:8px 16px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    background:#00ff9c;
    font-weight:bold;
}
/* ========== CONFETI ================= */
#confetti{
    position:fixed;
    inset:0;
    pointer-events:none;
    z-index:30;
}
/* ========== FOOTER ================= */
.footer{
    margin-top:120px;
    background:#0f1218;
    padding:14px;
    text-align:center;
    position:sticky;
    bottom:0;
}
.marquee{
    white-space:nowrap;
    animation:scroll 25s linear infinite;
    color:#5f6a85;
}
.socials{
    margin-top:10px;
    display:flex;
    justify-content:center;
    gap:16px;
    flex-wrap:wrap;
}
.socials a{
    color:#cfd6ff;
    text-decoration:none;
    font-size:14px;
}
/* ========== LUA CONSOLA FULLSCREEN ================= */
#luaConsoleFull{
    position:fixed;
    top:50px;
    left:0;
    width:100%;
    height:calc(100% - 50px);
    background:#0a0f1f;
    color:#fff;
    font-family:Consolas,monospace;
    font-size:14px;
    padding:10px;
    overflow-y:auto;
    display:none;
    z-index:99;
    box-sizing:border-box;
    white-space:pre-wrap;
    outline:none;
}
.lua-close, .lua-save, .lua-new, .lua-load{
    position:absolute;
    top:5px;
    padding:5px 10px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    z-index:101;
    display:none;
}
.lua-close{right:10px;background:#ff4d4d;color:#fff;}
.lua-save{right:90px;background:#00ff9c;color:#000;}
.lua-new{right:170px;background:#4d9cff;color:#000;}
.lua-load{right:250px;background:#ffb84d;color:#000;}
.lua-keyword{color:red;}
.lua-boolean{color:yellow;}
.lua-print{color:orange;}
.lua-string{color:#00ff00;}
.lua-comment{color:#7f8c8d;}
.lua-number{color:#00ff9c;}
</style>
</head>
<body>
<canvas id="confetti"></canvas>

<!-- SIDEBAR -->
<div class="sidebar-toggle">‚ãÆ</div>
<div class="sidebar" id="sidebar">
    <h3>Proyecto</h3>
    <button onclick="guardarProyecto()">üíæ Guardar Proyecto</button>
    <button onclick="cargarProyecto()">üìÇ Cargar Proyecto</button>
    <button onclick="abrirConfig()">‚öô Configuraci√≥n</button>
    <button onclick="abrirLuaFull()">üñ• Consola Lua</button>
</div>

<header>
    <div class="header-left" onclick="logoInput.click()">
        <img id="logo">
        <span class="brand">BASSBOOSDev</span>
        <input type="file" id="logoInput" hidden accept="image/*">
    </div>
    <div class="project-name" contenteditable id="projectName">T√≠tulo del proyecto</div>
    <div class="header-buttons" id="headerButtons"></div>
</header>

<div class="progress-box">
    <div class="progress-bar"><div class="progress" id="progress"></div></div>
</div>

<div class="pomodoro">
    <div id="time">25:00</div>
    <div>
        <button class="pomo-btn" id="playBtn" onclick="togglePomo()">‚ñ∂</button>
        <button class="pomo-btn" onclick="resetPomo()">‚ü≤</button>
    </div>
</div>

<div class="editor" id="editor"></div>
<div class="add" onclick="crearLinea()">Ôºã</div>

<!-- FELICIDADES -->
<div id="finish">
    <div>
        üéâ ¬°FELICIDADES! PROYECTO COMPLETADO üéâ
        <br>
        <button onclick="cerrarFinish()">Continuar</button>
    </div>
</div>

<!-- LUA CONSOLA -->
<div id="luaConsoleFull" contenteditable="true"></div>
<button class="lua-close" onclick="cerrarLuaFull()">Cerrar</button>
<button class="lua-save" onclick="guardarLuaScript()">Guardar</button>
<button class="lua-new" onclick="nuevoLuaScript()">Nuevo</button>
<button class="lua-load" onclick="cargarLuaScript()">Abrir</button>

<!-- MODAL LINK -->
<div id="linkModal" class="modal">
    <div class="modal-box">
        <input type="text" id="linkInput" placeholder="Pega el URL aqu√≠">
        <div style="display:flex;justify-content:flex-end;gap:10px;">
            <button onclick="guardarLink()">Aceptar</button>
            <button onclick="cerrarLinkModal()">Cancelar</button>
        </div>
    </div>
</div>

<!-- FOOTER -->
<div class="footer">
    <div class="marquee">
        üéÆ Termin√° lo que empez√°s ‚Ä¢ üöÄ Cada l√≠nea cuenta ‚Ä¢ üß† Aprender es avanzar ‚Ä¢ üèÜ Public√° sin miedo
    </div>
    <div style="margin-top:10px;font-size:13px;color:#5f6a85">
        Auto-ayudante: <b>Bassboos</b> ¬∑ Asistente IA: <b>OpenAI (ChatGPT)</b>
    </div>
    <div class="socials">
        <a href="https://www.youtube.com/@BASSBOOSShorts" target="_blank">‚ñ∂ YouTube</a>
        <a href="https://x.com/BASSBOOSDev" target="_blank">‚ùå X</a>
        <a href="https://chat.openai.com" target="_blank">ü§ñ ChatGPT</a>
    </div>
</div>

<script>
// ================= VARIABLES =================
const sidebar=document.getElementById("sidebar");
const toggle=document.querySelector(".sidebar-toggle");
const logo=document.getElementById("logo");
const logoInput=document.getElementById("logoInput");
const projectName=document.getElementById("projectName");
const editor=document.getElementById("editor");
const progress=document.getElementById("progress");
const finish=document.getElementById("finish");
const headerButtons=document.getElementById("headerButtons");

let finished=false;
let luaConsole=document.getElementById("luaConsoleFull");
let luaCloseBtn=document.querySelector(".lua-close");
let luaSaveBtn=document.querySelector(".lua-save");
let luaNewBtn=document.querySelector(".lua-new");
let luaLoadBtn=document.querySelector(".lua-load");
let luaScripts=JSON.parse(localStorage.getItem("luaScripts")||"{}");
let currentLuaTitle="Script1";

// ================= SIDEBAR =================
toggle.onclick=()=>sidebar.style.left=(sidebar.style.left=="0px"?"-280px":"0px");

// ================= LOGO =================
logo.src=localStorage.getItem("logo")||"";
logoInput.onchange=e=>{
    const r=new FileReader();
    r.onload=()=>{logo.src=r.result; localStorage.setItem("logo",r.result);}
    r.readAsDataURL(e.target.files[0]);
};

// ================= TITULO =================
projectName.textContent=localStorage.getItem("title")||projectName.textContent;
projectName.oninput=()=>localStorage.setItem("title",projectName.textContent);

// ================= EDITOR =================
function crearLinea(){
    const l=document.createElement("div");
    l.className="linea baja";
    l.innerHTML=`
        <div></div>
        <div class="texto" contenteditable></div>
        <select class="prio" onchange="setPrio(this)">
            <option value="baja">üü¢ Baja</option>
            <option value="media">üü° Media</option>
            <option value="alta">üî¥ Alta</option>
        </select>
        <div class="check" onclick="toggleCheck(this)">‚òê</div>
        <button class="delete-btn" onclick="eliminarLinea(this)">üóëÔ∏è</button>
    `;
    editor.appendChild(l);
}
function eliminarLinea(btn){btn.parentElement.remove(); updateProgress();}
function setPrio(s){const l=s.parentElement;l.classList.remove("alta","media","baja");l.classList.add(s.value);}
function toggleCheck(c){c.classList.toggle("completo");c.textContent=c.textContent==="‚òê"?"‚úî":"‚òê"; updateProgress();}
function updateProgress(){
    const t=document.querySelectorAll(".check").length;
    const d=document.querySelectorAll(".check.completo").length;
    progress.style.width=(d/t*100||0)+"%";
    if(d===t && t>0 && !finished){finished=true; finish.style.display="flex";}
}
for(let i=0;i<3;i++) crearLinea();

// ================= POMODORO =================
let time=1500, run=false, int;
const timeEl=document.getElementById("time");
const playBtn=document.getElementById("playBtn");
function updateTime(){timeEl.textContent=String(Math.floor(time/60)).padStart(2,"0")+":"+String(time%60).padStart(2,"0");}
function togglePomo(){if(!run){run=true;playBtn.textContent="‚è∏";int=setInterval(()=>{time--;updateTime();},1000);}else{run=false;playBtn.textContent="‚ñ∂";clearInterval(int);}}
function resetPomo(){clearInterval(int);run=false;time=1500;playBtn.textContent="‚ñ∂";updateTime();}
updateTime();

// ================= FELICIDADES =================
function cerrarFinish(){finish.style.display="none";}

// ================= PROYECTO =================
function guardarProyecto(){
    const data=[];
    document.querySelectorAll(".linea").forEach(l=>{
        data.push({
            texto:l.querySelector(".texto").innerHTML,
            prio:l.querySelector(".prio").value,
            check:l.querySelector(".check").classList.contains("completo")
        });
    });
    localStorage.setItem("projectData",JSON.stringify(data));
    alert("Proyecto guardado!");
}
function cargarProyecto(){
    const data=JSON.parse(localStorage.getItem("projectData")||"[]");
    editor.innerHTML="";
    data.forEach(item=>{
        crearLinea();
        const l=editor.lastChild;
        l.querySelector(".texto").innerHTML=item.texto;
        l.querySelector(".prio").value=item.prio;
        setPrio(l.querySelector(".prio"));
        const check=l.querySelector(".check");
        if(item.check) check.classList.add("completo");
        check.textContent = item.check ? "‚úî" : "‚òê";
    });
    updateProgress();
    sidebar.style.left="-280px";
}

// ================= CONFIG =================
const configModal=document.createElement("div");
configModal.className="modal";
configModal.innerHTML=`<div class="modal-box">
<input type="text" id="configName" placeholder="Nombre del proyecto">
<input type="file" id="configLogo" accept="image/*">
<select id="themeSelect">
<option value="dark">üåô Oscuro</option>
<option value="light">‚òÄ Claro</option>
</select>
<div class="modal-actions">
<button class="accept" onclick="guardarConfig()">Guardar</button>
<button class="cancel" onclick="cerrarConfig()">Cerrar</button>
</div>
</div>`;
document.body.appendChild(configModal);
const configName=document.getElementById("configName");
const configLogo=document.getElementById("configLogo");
const themeSelect=document.getElementById("themeSelect");
function abrirConfig(){
    configName.value=projectName.textContent;
    themeSelect.value=localStorage.getItem("theme")||"dark";
    configModal.style.display="flex";
}
function cerrarConfig(){configModal.style.display="none";}
function guardarConfig(){
    projectName.textContent=configName.value;
    localStorage.setItem("title",configName.value);
    if(configLogo.files[0]){
        const r=new FileReader();
        r.onload=()=>{logo.src=r.result; localStorage.setItem("logo",r.result);}
        r.readAsDataURL(configLogo.files[0]);
    }
    if(themeSelect.value=="light"){document.body.style.background="#f0f0f0";document.body.style.color="#111";localStorage.setItem("theme","light");}
    else{document.body.style.background="linear-gradient(135deg,#1b1f2a,#12151c)";document.body.style.color="#eaeaea";localStorage.setItem("theme","dark");}
    cerrarConfig();
}
if(localStorage.getItem("theme")=="light"){document.body.style.background="#f0f0f0";document.body.style.color="#111";}

// ================= LUA CONSOLA =================
function abrirLuaFull(){
    luaConsole.style.display="block";
    luaCloseBtn.style.display="inline-block";
    luaSaveBtn.style.display="inline-block";
    luaNewBtn.style.display="inline-block";
    luaLoadBtn.style.display="inline-block";
    luaConsole.focus();
    aplicarResaltado();
}
function cerrarLuaFull(){
    luaConsole.style.display="none";
    luaCloseBtn.style.display="none";
    luaSaveBtn.style.display="none";
    luaNewBtn.style.display="none";
    luaLoadBtn.style.display="none";
}
function guardarLuaScript(){
    const code=luaConsole.innerText;
    const title=prompt("Nombre del script:",currentLuaTitle);
    if(!title) return;
    luaScripts[title]=code;
    localStorage.setItem("luaScripts",JSON.stringify(luaScripts));
    const blob=new Blob([code],{type:"text/plain"});
    const a=document.createElement("a");
    a.href=URL.createObjectURL(blob);
    a.download=title+".lua";
    a.click();
    currentLuaTitle=title;
    alert("Script guardado!");
}
function nuevoLuaScript(){
    const title=prompt("Nombre del nuevo script:","Script"+(Object.keys(luaScripts).length+1));
    if(!title) return;
    luaConsole.innerText="";
    currentLuaTitle=title;
    aplicarResaltado();
}
function cargarLuaScript(){
    const titles=Object.keys(luaScripts);
    if(titles.length===0){alert("No hay scripts guardados"); return;}
    const sel=prompt("Selecciona script:\n"+titles.join("\n"),titles[0]);
    if(sel && luaScripts[sel]){
        luaConsole.innerText=luaScripts[sel];
        currentLuaTitle=sel;
        aplicarResaltado();
    }
}
function aplicarResaltado(){
    let code=luaConsole.innerText;
    code=code.replace(/(&)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
    code=code.replace(/(--.*)/g,'<span class="lua-comment">$1</span>');
    code=code.replace(/"(.*?)"/g,'<span class="lua-string">"$1"</span>');
    code=code.replace(/\b(print)\b/g,'<span class="lua-print">$1</span>');
    code=code.replace(/\b(local|if|end|while|do|then|for|function|repeat|until)\b/g,'<span class="lua-keyword">$1</span>');
    code=code.replace(/\b(true|false)\b/g,'<span class="lua-boolean">$1</span>');
    code=code.replace(/\b\d+(\.\d+)?\b/g,'<span class="lua-number">$&</span>');
    luaConsole.innerHTML=code;
}
luaConsole.addEventListener("keydown",e=>{
    if(e.key==="Tab"){e.preventDefault();document.execCommand('insertText',false,'    ');aplicarResaltado();}
});
luaConsole.addEventListener("input",aplicarResaltado);

// ================= LINK HEADER DERECHO =================
const linkBtn=document.createElement("button");
linkBtn.textContent="üîó Link";
linkBtn.className="header-btn";
linkBtn.onclick=()=>document.getElementById("linkModal").style.display="flex";
headerButtons.appendChild(linkBtn);

function cerrarLinkModal(){document.getElementById("linkModal").style.display="none";}
function guardarLink(){
    const url=document.getElementById("linkInput").value.trim();
    if(!url){alert("Ingres√° un URL v√°lido"); return;}
    localStorage.setItem("proyectoLink",url);
    alert("URL guardado!"); cerrarLinkModal();
    if(!document.getElementById("openLinkBtn")){
        const btn=document.createElement("button");
        btn.id="openLinkBtn";
        btn.className="header-btn";
        btn.textContent="Abrir";
        btn.onclick=()=>window.open(localStorage.getItem("proyectoLink"),"_blank");
        headerButtons.appendChild(btn);
    }
}
</script>
</body>
</html>


